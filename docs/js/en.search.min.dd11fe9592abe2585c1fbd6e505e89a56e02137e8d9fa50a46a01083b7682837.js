'use strict';(function(){const b=document.querySelector('#gdoc-search-input'),a=document.querySelector('#gdoc-search-results');let c=!1;b&&(b.addEventListener('focus',d),b.addEventListener('keyup',g));function d(){b.removeEventListener('focus',d),f('/js/groupBy-174feb11c7.min.js'),f('/js/flexsearch-e54a90f706.min.js',function(){const b={tokenize:'forward'},a=b,c='/en.search-data.min.json';a.document={key:'id',index:['title','content'],store:['title','href','parent']};const d=new FlexSearch.Document(a);window.geekdocSearchIndex=d,i(c,function(a){a.forEach(a=>{window.geekdocSearchIndex.add(a)})})})}function g(){const g={enrich:!0,limit:10};while(a.firstChild)a.removeChild(a.firstChild);if(!b.value)return a.classList.remove('has-hits');let d=j(window.geekdocSearchIndex.search(b.value,g));if(d.length<1)return a.classList.remove('has-hits');a.classList.add('has-hits'),c===!0&&(d=groupBy(d,a=>a.parent));const f=[];if(c===!0)for(const b in d){const a=document.createElement('li'),c=a.appendChild(document.createElement('span')),g=a.appendChild(document.createElement('ul'));c.textContent=b,e(d[b],g),f.push(a)}else{const a=document.createElement('li'),b=a.appendChild(document.createElement('span')),c=a.appendChild(document.createElement('ul'));b.textContent='Results',e(d,c),f.push(a)}f.forEach(b=>{a.appendChild(b)})}function e(c,a){const b=[];for(const f of c){const d=document.createElement("li"),g=d.appendChild(document.createElement("span")),e=g.appendChild(document.createElement("a"));if(g.classList.add('flex'),e.href=f.href,e.textContent=f.title,e.classList.add('gdoc-search__entry'),a){a.appendChild(d);continue}b.push(d)}return b}function h(a){if(!a.ok)throw Error(a.statusText);return a}function i(a,b){fetch(a).then(h).then(a=>a.json()).then(a=>b(a)).catch(function(a){console.log(a)})}function j(c){const a=[],b=new Map;for(const d of c)for(const c of d.result)b.has(c.doc.href)||(b.set(c.doc.href,!0),a.push(c.doc));return a}function f(b,c){let a=document.createElement('script');a.defer=!0,a.async=!1,a.src=b,a.onload=c,document.body.appendChild(a)}})()